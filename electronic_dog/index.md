# 三控电子狗原理分析——光控、磁控、声控

> 注：本项目来自BUPT课程《电子工艺实习》
## 导入
电子狗是声控、光控、磁控机电一体化电动玩具。主要工作原理：利用555构成的单稳态触发器，在三种不同的控制方法下，均给以低电平触发，促使电机转动，从而达到了机器狗停走的目的。即：拍手即走、光照即走、磁铁靠近即走，但都只是持续一段时间后就停会下，再满足其中一条件时将继续行走。   
原理图如下：
![e-dog](/image/e-dog/e-dog.jpg)

整个系统可分为信号转化、单稳态触发器以及电机驱动三个部分。
## 单稳态触发器————以555定时器为核心
> 这部分的功能是：将持续时间很短的低电平信号转换为固定时间间隔（1.1RC）的高电平信号以控制电子狗走路持续时间（控制R和C的数值）。 

关于单稳态触发器的原理分析可参考以下文章： 
[555定时器](https://leeshy-tech.github.io/555timer/)    
## 信号转化
> 这部分的功能是将磁、光、声信号转换为低电平电信号。

### 磁信号
![干簧片](/image/e-dog/干簧片.jpg)
- 磁信号向电信号的转换通过干簧管传感器实现，干簧片的电路模型类似于一个磁控开关，外加磁场时开关闭合，常态开关断开（也有常态是闭合的干簧管），详细原理如下：
- 干簧片相当于一个磁通导体，在尚未操作时，两片簧片并未接触；在通过永久磁铁或电磁线圈产生的磁场时，外加的磁场使两片簧片端点位置附近产生不同的极性, 当磁力超过簧片本身的弹力时，这两片簧片会吸合导通电路；当磁场减弱或消失后,干簧片由于本身的弹性而释放，触面就会分开从而打开电路。
- 接上拉电阻即可实现常驻高电平，外加磁场时开关闭合输出低电平。  
![上拉电阻](/image/e-dog/上拉电阻.jpg)
### 光信号
![光敏三级管](/image/e-dog/光敏三极管.jpg)
- 光信号向电信号的转变通过光敏三极管实现，电路模型相当于光控开关，光照相当于开关闭合，详细原理如下：
- 光敏三极管的发射极具有光敏特性。它的集电极则与普通晶体管一样，可以获得电流增益，基极一般没有引线。当受到光照时CE两极导通，相当于开关闭合。
- 同样使用上拉电阻，不再赘述。
### 声信号
![ECM](/image/e-dog/ECM.jpg)
- 声信号向电信号的转变通过麦克风实现，目前常用的麦克风有驻极体电容麦克风（ECM）和微机电麦克风（MEMS Micphone）。在电子狗实验中使用的是ECM，声波压力推动极板后退使得电容两极电压升高，从而将声信号转换为了电压信号。
- 因需要对电压放大，驻极体麦克风内部有一个场效应管，正常工作需要加一个直流偏置，其驱动电路之一为：  
![ECM应用电路](/image/e-dog/ECM应用电路.jpg)    
电容的作用是隔直流。
- 应用于电子狗的电路设计如下：  
![ECM电子狗应用电路](/image/e-dog/ECM电子狗应用电路.jpg)    
左侧为驱动电路，中间加一级共射放大器，右侧是二极管反相器，当麦克风接收到声音信号时，产生交流电压，放大到二级管基极，二极管导通，输出接地，即输出低电平。
## 电机驱动
> 此部分的功能是利用555定时器输出的高电平信号驱动电机转动   

电动机是怎么驱动的？非常简单，电池分别接正负极即可。    
但是，在已有的场景下，不能使用这种方式，即把555定时器的输出端3号管脚接到电动机正极，地接电动机负极。
原因是：555定时器的驱动能力不足。   
![NE555P最大额定值](/image/e-dog/NE555P最大额定值.jpg)  
查询555定时器（NE555P）的数据手册可知，输出电流最大只有225mA左右，常见的电动玩具马达空载驱动电流在600mA左右，555定时器是不足以驱动马达的。    
![马达](/image/e-dog/马达.jpg)  
最简单的放大电流的方法就是晶体管反相器，所以电机驱动的电路原理图如下：  
![电机驱动](/image/e-dog/电机驱动.jpg)  
并联两个三极管增大放大倍数，二极管是防止电机反转，注意这是一个反相器，所以要接到电动机的负极。
